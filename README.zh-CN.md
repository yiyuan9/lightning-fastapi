# âš¡ï¸ Lightning-FastAPI åç«¯ Starter

[![English](https://img.shields.io/badge/Language-English-blue)](README.md)
[![ä¸­æ–‡](https://img.shields.io/badge/è¯­è¨€-ä¸­æ–‡-red)](README.zh-CN.md)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                    â”‚
â”‚â–—    â–      â–    â–—       â–              â–—â–„â–„â––         â–—   â–—â–– â–—â–„â–„ â–—â–„â–„ â”‚
â”‚â–   â–—â–„   â–„â–„ â–â–—â–– â–—â–Ÿâ–„ â–—â–—â–– â–—â–„  â–—â–—â––  â–„â–„     â–    â–„â––  â–„â–– â–—â–Ÿâ–„  â–â–Œ â– â–â–Œ â–  â”‚
â”‚â–    â–  â–â–˜â–œ â–â–˜â–  â–  â–â–˜â–  â–  â–â–˜â– â–â–˜â–œ     â–â–„â–„â––â– â– â– â–  â–   â–Œâ– â–â–„â–Ÿâ–˜ â–  â”‚
â”‚â–    â–  â– â– â– â–  â–  â– â–  â–  â– â– â– â–     â–   â–—â–€â–œ  â–€â–š  â–   â–™â–Ÿ â–    â–  â”‚
â”‚â–â–„â–„â––â–—â–Ÿâ–„ â–â–™â–œ â– â–  â–â–„ â– â– â–—â–Ÿâ–„ â– â– â–â–™â–œ     â–   â–â–„â–œ â–â–„â–  â–â–„ â–  â–Œâ–   â–—â–Ÿâ–„ â”‚
â”‚         â––â–                      â––â–                                 â”‚
â”‚         â–â–˜                      â–â–˜                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                               âš¡ï¸ By JY
```

## ç›®å½•

- [FastAPI åç«¯ Starter](#fastapi-åç«¯-starter)
  - [é¡¹ç›®ç®€ä»‹](#é¡¹ç›®ç®€ä»‹)
  - [è‡´è°¢](#è‡´è°¢)
  - [ç‰¹æ€§](#ç‰¹æ€§)
  - [å¿«é€Ÿå¼€å§‹](#å¿«é€Ÿå¼€å§‹-)
  - [æŠ€æœ¯æ ˆ](#æŠ€æœ¯æ ˆ)
  - [é¡¹ç›®ç»“æ„](#é¡¹ç›®ç»“æ„)
  - [ç›®å½•](#ç›®å½•)
  - [å®Œæ•´è®¾ç½®æŒ‡å—](#å®Œæ•´è®¾ç½®æŒ‡å—)
    - [1. è·å–ä»£ç ](#1-è·å–ä»£ç )
    - [2. é…ç½®ç¯å¢ƒå˜é‡](#2-é…ç½®ç¯å¢ƒå˜é‡)
    - [3. ä½¿ç”¨Dockerå¯åŠ¨é¡¹ç›®](#3-ä½¿ç”¨dockerå¯åŠ¨é¡¹ç›®)
    - [4. éªŒè¯é¡¹ç›®è¿è¡ŒçŠ¶æ€](#4-éªŒè¯é¡¹ç›®è¿è¡ŒçŠ¶æ€)
    - [5. æ•°æ®åº“è¿ç§»ï¼ˆå¦‚éœ€ä¿®æ”¹æ¨¡å‹ï¼‰](#5-æ•°æ®åº“è¿ç§»å¦‚éœ€ä¿®æ”¹æ¨¡å‹)
    - [6. åˆå§‹åŒ–æ–°çš„Gitä»“åº“ï¼ˆå¯é€‰ï¼‰](#6-åˆå§‹åŒ–æ–°çš„gitä»“åº“å¯é€‰)
  - [å¸¸è§é—®é¢˜æ’æŸ¥](#å¸¸è§é—®é¢˜æ’æŸ¥)
  - [å¼€å‘æŒ‡å—](#å¼€å‘æŒ‡å—)
    - [é¡¹ç›®ç»“æ„](#é¡¹ç›®ç»“æ„-1)
    - [API æ–‡æ¡£](#api-æ–‡æ¡£)
    - [ä¾èµ–ç®¡ç†](#ä¾èµ–ç®¡ç†)
    - [è‡ªå®šä¹‰å¼€å‘](#è‡ªå®šä¹‰å¼€å‘)
  - [éƒ¨ç½²ä¸å®šåˆ¶](#éƒ¨ç½²ä¸å®šåˆ¶)
    - [éƒ¨ç½²é…ç½®](#éƒ¨ç½²é…ç½®)
    - [é¡¹ç›®å®šåˆ¶](#é¡¹ç›®å®šåˆ¶)
  - [æ•…éšœæ’é™¤](#æ•…éšœæ’é™¤)
    - [æ•°æ®åº“è¿ç§»é—®é¢˜](#æ•°æ®åº“è¿ç§»é—®é¢˜)
  - [è®¸å¯](#è®¸å¯)

## é¡¹ç›®ç®€ä»‹

è¿™æ˜¯ä¸€ä¸ªåŸºäº FastAPI çš„åç«¯ Starter é¡¹ç›®ï¼Œæä¾›äº†å®Œæ•´çš„ç”¨æˆ·è®¤è¯ã€æ•°æ®åº“é›†æˆå’Œ Docker éƒ¨ç½²æ”¯æŒï¼Œå¸®åŠ©ä½ å¿«é€Ÿå¯åŠ¨æ–°çš„åç«¯é¡¹ç›®å¼€å‘ã€‚

## è‡´è°¢

ç‰¹åˆ«æ„Ÿè°¢ [@liseami](https://github.com/liseami)

## ç‰¹æ€§

- âœ… å®Œæ•´çš„ç”¨æˆ·è®¤è¯ç³»ç»Ÿï¼ˆæ³¨å†Œã€ç™»å½•ã€JWTä»¤ç‰Œï¼‰
- âœ… è¡Œçº§å®‰å…¨ (RLS) æ”¯æŒ
- âœ… çŸ­ä¿¡éªŒè¯ç åŠŸèƒ½
- âœ… å¾…åŠäº‹é¡¹ç¤ºä¾‹API
- âœ… Docker å®¹å™¨åŒ–éƒ¨ç½²
- âœ… è‡ªåŠ¨åŒ–æ•°æ®åº“è¿ç§»
- âœ… å¼€å‘å’Œç”Ÿäº§ç¯å¢ƒé…ç½®
- âœ… ä¼˜åŒ–çš„é¡¹ç›®ç»“æ„
- âœ… Cursoræ™ºèƒ½è§„åˆ™ï¼ˆPython FastAPIè§„åˆ™ï¼‰
- âœ… SQLModelä¸FastAPIé›†æˆ
- âœ… å¤šç¯å¢ƒæ”¯æŒï¼ˆå¼€å‘ã€æµ‹è¯•ã€ç”Ÿäº§ï¼‰
- âœ… å®Œæ•´çš„CI/CDå·¥ä½œæµé…ç½®
- âœ… å…¨çƒåŒ–é”™è¯¯å¤„ç†æœºåˆ¶
- âœ… å¼‚æ­¥æ•°æ®åº“æ“ä½œæ”¯æŒ
- âœ… APIæ€§èƒ½ä¼˜åŒ–å»ºè®®
- âœ… ç”Ÿå‘½å‘¨æœŸç®¡ç†ï¼ˆlifespanï¼‰
- âœ… è‡ªåŠ¨åŒ–éƒ¨ç½²è„šæœ¬
- âœ… å¿«é€Ÿåˆ›å»ºé¡¹ç›®CLIå·¥å…·

## å¿«é€Ÿå¼€å§‹ âš¡

### æ–¹æ³•1: ä½¿ç”¨PythonåŒ…åˆ›å»ºé¡¹ç›®ï¼ˆæœ€ç®€å•ï¼‰

æœ€ç®€å•çš„æ–¹å¼æ˜¯é€šè¿‡pipå®‰è£…å’Œä½¿ç”¨æˆ‘ä»¬çš„Pythonå‘½ä»¤è¡Œå·¥å…·ï¼š

```bash
# å®‰è£…å·¥å…·
pip3 install lightning-fastapi

# åˆ›å»ºä¸€ä¸ªåä¸º"my-backend"çš„æ–°é¡¹ç›®
lightning-fastapi my-backend

# æˆ–è€…ä¸æŒ‡å®šåç§°ï¼Œäº¤äº’å¼åˆ›å»º
lightning-fastapi
```

è¿™ä¸ªå‘½ä»¤ä¼šï¼š
1. è‡ªåŠ¨åˆ›å»ºä¸€ä¸ªæ–°çš„é¡¹ç›®ç›®å½•
2. å…‹éš†å¹¶é…ç½®å¥½æ‰€æœ‰å¿…è¦çš„æ–‡ä»¶
3. åˆ›å»ºä¸€ä¸ªæ–°çš„Gitä»“åº“
4. è‡ªåŠ¨ä½¿ç”¨Dockerå¯åŠ¨é¡¹ç›®

> **æ³¨æ„**ï¼š`lightning-fastapi` å‘½ä»¤æ˜¯ç”¨æ¥åˆ›å»ºæ–°é¡¹ç›®çš„å·¥å…·ï¼Œå®ƒä¼šè‡ªåŠ¨å¯åŠ¨Dockerå®¹å™¨ã€‚åˆ›å»ºåçš„é¡¹ç›®æœ¬èº«ä»ç„¶ä½¿ç”¨Poetryè¿›è¡Œä¾èµ–ç®¡ç†ã€‚

### æ–¹æ³•2: ä¸€é”®å¯åŠ¨

å¦‚æœä½ å·²ç»å®‰è£…äº†Dockerå’ŒDocker Composeï¼Œä½ å¯ä»¥ä½¿ç”¨æˆ‘ä»¬çš„ä¸€é”®å¯åŠ¨è„šæœ¬ï¼š

```bash
# å…‹éš†ä»“åº“
git clone [ä»“åº“URL] lighting-fastapi
cd lighting-fastapi

# è¿è¡Œä¸€é”®å¯åŠ¨è„šæœ¬
chmod +x scripts/quickstart.sh
./scripts/quickstart.sh
```

è¿™ä¸ªè„šæœ¬ä¼šè‡ªåŠ¨ï¼š
1. æ£€æŸ¥Dockerå’ŒDocker Composeæ˜¯å¦å·²å®‰è£…
2. åˆ›å»ºé»˜è®¤ç¯å¢ƒé…ç½®
3. å¯åŠ¨åŒ…å«PostgreSQLæ•°æ®åº“çš„Dockerå®¹å™¨
4. è®¾ç½®å’Œåˆå§‹åŒ–åº”ç”¨

å¯åŠ¨æˆåŠŸåï¼Œä½ å¯ä»¥åœ¨æµè§ˆå™¨ä¸­è®¿é—® http://localhost:8000/docs æŸ¥çœ‹APIæ–‡æ¡£ã€‚

## æŠ€æœ¯æ ˆ

- **æ•°æ®åº“æ˜ å°„**: [SQLModel](https://sqlmodel.tiangolo.com/)
- **ä¾èµ–ç®¡ç†**: [Poetry](https://python-poetry.org/)
- **API æ¡†æ¶**: [FastAPI](https://fastapi.tiangolo.com/)
- **æ•°æ®åº“è¿ç§»**: [Alembic](https://alembic.sqlalchemy.org/)
- **è®¤è¯**: JWT Token
- **å®¹å™¨åŒ–**: Docker & Docker Compose

## é¡¹ç›®ç»“æ„

é¡¹ç›®é‡‡ç”¨æ¨¡å—åŒ–çš„ç›®å½•ç»“æ„ï¼Œä¾¿äºæ‰©å±•å’Œç»´æŠ¤ï¼š

```
.
â”œâ”€â”€ app/                    # ä¸»åº”ç”¨ä»£ç 
â”‚   â”œâ”€â”€ alembic/            # æ•°æ®åº“è¿ç§»é…ç½®
â”‚   â”œâ”€â”€ api/                # APIè·¯ç”±å’Œä¾èµ–
â”‚   â”œâ”€â”€ core/               # æ ¸å¿ƒé…ç½®
â”‚   â”œâ”€â”€ crud/               # æ•°æ®åº“æ“ä½œ
â”‚   â”œâ”€â”€ models/             # æ•°æ®æ¨¡å‹
â”‚   â”œâ”€â”€ tool/               # å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ backend_pre_start.py # å¯åŠ¨å‰æ£€æŸ¥
â”‚   â”œâ”€â”€ initial_data.py     # åˆå§‹æ•°æ®
â”‚   â”œâ”€â”€ log_info.py         # æ—¥å¿—å·¥å…·
â”‚   â””â”€â”€ main.py             # åº”ç”¨å…¥å£
â”œâ”€â”€ config/                 # é…ç½®æ–‡ä»¶ç›®å½•
â”‚   â”œâ”€â”€ .env                # ç¯å¢ƒå˜é‡é…ç½®
â”‚   â”œâ”€â”€ .env.staging        # æµ‹è¯•ç¯å¢ƒé…ç½®
â”‚   â””â”€â”€ alembic.ini         # Alembicè¿ç§»é…ç½®
â”œâ”€â”€ docker/                 # Dockerç›¸å…³æ–‡ä»¶
â”‚   â”œâ”€â”€ Dockerfile          # åº”ç”¨å®¹å™¨é…ç½®
â”‚   â””â”€â”€ docker-compose.yml  # å®¹å™¨ç¼–æ’é…ç½®
â”œâ”€â”€ docs/                   # æ–‡æ¡£ç›®å½•
â”‚   â””â”€â”€ PUBLISH.md          # NPMåŒ…å‘å¸ƒæŒ‡å—
â”œâ”€â”€ scripts/                # è„šæœ¬ç›®å½•
â”‚   â”œâ”€â”€ quickstart.sh       # å¿«é€Ÿå¯åŠ¨è„šæœ¬
â”‚   â””â”€â”€ start.sh            # åº”ç”¨å¯åŠ¨è„šæœ¬
â”œâ”€â”€ tools/                  # å¼€å‘å·¥å…·
â”‚   â”œâ”€â”€ create-lighting-fastapi.js # NPXåˆ›å»ºé¡¹ç›®è„šæœ¬
â”‚   â””â”€â”€ package.json        # NPMåŒ…é…ç½®
â”œâ”€â”€ .github/                # GitHubå·¥ä½œæµé…ç½®
â”œâ”€â”€ .gitignore              # Gitå¿½ç•¥æ–‡ä»¶
â”œâ”€â”€ LICENSE                 # é¡¹ç›®è®¸å¯è¯
â”œâ”€â”€ poetry.lock             # Poetryé”å®šä¾èµ–
â”œâ”€â”€ pyproject.toml          # Pythoné¡¹ç›®é…ç½®
â””â”€â”€ README.md               # é¡¹ç›®è¯´æ˜æ–‡æ¡£
```

### ç›®å½•è¯´æ˜

- **app/** - æ ¸å¿ƒåº”ç”¨ä»£ç ï¼ŒåŒ…å«æ‰€æœ‰ä¸šåŠ¡é€»è¾‘ã€APIè·¯ç”±å’Œæ•°æ®æ¨¡å‹
- **config/** - å­˜æ”¾é¡¹ç›®é…ç½®æ–‡ä»¶ï¼Œå¦‚ç¯å¢ƒå˜é‡å’Œæ•°æ®åº“è¿ç§»é…ç½®
- **docker/** - Dockerç›¸å…³æ–‡ä»¶ï¼Œç”¨äºå®¹å™¨åŒ–éƒ¨ç½²åº”ç”¨
- **docs/** - é¡¹ç›®æ–‡æ¡£ç›®å½•
- **scripts/** - è‡ªåŠ¨åŒ–è„šæœ¬ï¼Œç”¨äºéƒ¨ç½²ã€å¯åŠ¨å’Œé…ç½®é¡¹ç›®
- **tools/** - å¼€å‘å·¥å…·ï¼Œå¦‚NPXè„šæœ¬ç”¨äºå¿«é€Ÿåˆ›å»ºé¡¹ç›®

## å®Œæ•´è®¾ç½®æŒ‡å—

ä»¥ä¸‹æ˜¯ä»é›¶å¼€å§‹è®¾ç½®FastAPIåç«¯Starteré¡¹ç›®çš„å®Œæ•´æ­¥éª¤ã€‚æŒ‰ç…§é¡ºåºæ‰§è¡Œæ¯ä¸€æ­¥ï¼Œå³å¯å¿«é€Ÿæ­å»ºèµ·ä¸€ä¸ªåŠŸèƒ½å®Œæ•´çš„åç«¯æœåŠ¡ã€‚

### 1. è·å–ä»£ç 

```bash
# å…‹éš†ä»“åº“
git clone [ä»“åº“URL] lighting-fastapi
cd lighting-fastapi

# ç§»é™¤ç°æœ‰Gitç‰ˆæœ¬æ§åˆ¶ï¼ˆå¦‚æœè¦åˆ›å»ºè‡ªå·±çš„é¡¹ç›®ï¼‰
rm -rf .git
```

### 2. é…ç½®ç¯å¢ƒå˜é‡

ä¿®æ”¹é¡¹ç›®æ ¹ç›®å½•ä¸­çš„`.env`æ–‡ä»¶ï¼Œæ ¹æ®æ‚¨çš„PostgreSQLè®¾ç½®æ›´æ–°ä»¥ä¸‹é…ç½®ï¼š

```
# æ•°æ®åº“é…ç½® - æœ¬åœ°å¼€å‘ç¯å¢ƒ
POSTGRES_SERVER=host.docker.internal  # Dockerä¸­è¿æ¥æœ¬åœ°æ•°æ®åº“çš„åœ°å€
# POSTGRES_SERVER=localhost  # å¦‚æœä¸ä½¿ç”¨Dockerï¼Œå¯æ”¹ä¸ºlocalhost
POSTGRES_PORT=5432  # PostgreSQLé»˜è®¤ç«¯å£
POSTGRES_USER=postgres  # æ›´æ”¹ä¸ºæ‚¨çš„PostgreSQLç”¨æˆ·å
POSTGRES_PASSWORD=postgres  # æ›´æ”¹ä¸ºæ‚¨çš„PostgreSQLå¯†ç 
POSTGRES_DB=fastapi_starter  # æ‚¨åˆ›å»ºçš„æ•°æ®åº“åç§°

# è¶…çº§ç®¡ç†å‘˜é…ç½® - è¯·ä¿®æ”¹ä¸ºæ‚¨è‡ªå·±çš„è®¾ç½®
FIRST_SUPERUSER=admin
FIRST_SUPERUSER_PHONE_NUMBER=13800138000
FIRST_SUPERUSER_PASSWORD=admin123

# æ˜¯å¦å¼€æ”¾æ³¨å†Œ
USERS_OPEN_REGISTRATION=True
```

### 3. ä½¿ç”¨Dockerå¯åŠ¨é¡¹ç›®

ç¡®ä¿æ‚¨å·²ç»å®‰è£…äº†Dockerå’ŒDocker Composeï¼Œç„¶åæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š

```bash
# æ„å»ºå¹¶å¯åŠ¨å®¹å™¨
docker compose -f docker/docker-compose-local.yml up -d

# æŸ¥çœ‹è¿è¡ŒçŠ¶æ€
docker compose -f docker/docker-compose-local.yml ps
```

> **æ³¨æ„**ï¼šé¦–æ¬¡å¯åŠ¨éœ€è¦ä¸‹è½½é•œåƒå’Œå®‰è£…ä¾èµ–ï¼Œå¯èƒ½éœ€è¦å‡ åˆ†é’Ÿçš„æ—¶é—´ã€‚è¯·è€å¿ƒç­‰å¾…ã€‚

### 4. éªŒè¯é¡¹ç›®è¿è¡ŒçŠ¶æ€

å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼éªŒè¯é¡¹ç›®æ˜¯å¦æ­£å¸¸è¿è¡Œï¼š

```bash
# æŸ¥çœ‹å®¹å™¨æ—¥å¿—
docker compose -f docker/docker-compose-local.yml logs -f
```

æˆåŠŸå¯åŠ¨åï¼Œæ‚¨å°†çœ‹åˆ°ç±»ä¼¼ä»¥ä¸‹çš„è¾“å‡ºä¿¡æ¯ï¼š

```
app-1  | ğŸš€ â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€” ç¨‹åºå¯åŠ¨
app-1  | ğŸŒ è¿è¡Œç¯å¢ƒ: development
app-1  | ğŸ“ é¡¹ç›®åç§°: lightning-fastapi
app-1  | ğŸ”— APIè·¯å¾„: /api/v1
app-1  | âœ… â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€” ç¨‹åºå¯åŠ¨
```

åŒæ—¶ï¼Œæ‰“å¼€æµè§ˆå™¨è®¿é—® http://localhost:8000/docs åº”è¯¥èƒ½çœ‹åˆ°APIæ–‡æ¡£ç•Œé¢ã€‚

### 5. æ•°æ®åº“è¿ç§»ï¼ˆå¦‚éœ€ä¿®æ”¹æ¨¡å‹ï¼‰

å¦‚æœæ‚¨ä¿®æ”¹äº†æ•°æ®æ¨¡å‹å¹¶éœ€è¦æ›´æ–°æ•°æ®åº“ç»“æ„ï¼Œè¯·æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š

```bash
# è¿›å…¥åº”ç”¨å®¹å™¨
docker compose -f docker/docker-compose-local.yml exec app bash

# ç”Ÿæˆè¿ç§»è„šæœ¬
alembic revision --autogenerate -m "æè¿°æ‚¨çš„å˜æ›´"

# åº”ç”¨è¿ç§»
alembic upgrade head

# é€€å‡ºå®¹å™¨
exit
```

### 6. åˆå§‹åŒ–æ–°çš„Gitä»“åº“ï¼ˆå¯é€‰ï¼‰

å¦‚æœæ‚¨æ‰“ç®—å°†è¿™ä¸ªstarteré¡¹ç›®ä½œä¸ºæ‚¨è‡ªå·±é¡¹ç›®çš„èµ·ç‚¹ï¼Œå¯ä»¥åˆå§‹åŒ–ä¸€ä¸ªæ–°çš„Gitä»“åº“ï¼š

```bash
# åˆå§‹åŒ–æ–°çš„Gitä»“åº“
git init

# æ·»åŠ æ‰€æœ‰æ–‡ä»¶
git add .

# æäº¤åˆå§‹ä»£ç 
git commit -m "åˆå§‹åŒ–FastAPIåç«¯Starteré¡¹ç›®"

# æ·»åŠ è¿œç¨‹ä»“åº“ï¼ˆæ›¿æ¢ä¸ºæ‚¨è‡ªå·±çš„GitHubä»“åº“åœ°å€ï¼‰
git remote add origin https://github.com/your-username/your-repo-name.git
git branch -M main
git push -u origin main
```

## å¸¸è§é—®é¢˜æ’æŸ¥

å¦‚æœé¡¹ç›®æœªèƒ½æ­£å¸¸å¯åŠ¨ï¼Œè¯·æ£€æŸ¥ä»¥ä¸‹å‡ ç‚¹ï¼š

1. **ç«¯å£å†²çª**ï¼š
   - ç¡®ä¿ç«¯å£8000æ²¡æœ‰è¢«å…¶ä»–åº”ç”¨å ç”¨
   - å¦‚éœ€ä½¿ç”¨å…¶ä»–ç«¯å£ï¼Œä¿®æ”¹`docker/docker-compose-local.yml`æ–‡ä»¶ä¸­çš„ç«¯å£æ˜ å°„ï¼ˆä¾‹å¦‚ "8080:8000"ï¼‰

2. **Dockerç›¸å…³é—®é¢˜**ï¼š
   - ç¡®ä¿Dockerå’ŒDocker Composeå·²æ­£ç¡®å®‰è£…ï¼ˆè¿è¡Œ`docker --version`å’Œ`docker compose version`æ£€æŸ¥ï¼‰
   - å°è¯•é‡å»ºå®¹å™¨ï¼š`docker compose -f docker/docker-compose-local.yml up -d --build --force-recreate`

3. **æƒé™é—®é¢˜**ï¼š
   - åœ¨Linuxç³»ç»Ÿä¸Šï¼Œå¯èƒ½éœ€è¦ä½¿ç”¨`sudo`æ¥è¿è¡ŒDockerå‘½ä»¤

4. **æ¸…ç†Dockerç¼“å­˜**ï¼ˆå¦‚æœé‡åˆ°å¥‡æ€ªçš„é—®é¢˜ï¼‰ï¼š
   ```bash
   docker compose -f docker/docker-compose-local.yml down
   docker system prune -a
   docker compose -f docker/docker-compose-local.yml up -d
   ```

## å¼€å‘æŒ‡å—

### é¡¹ç›®ç»“æ„

```
app/
â”œâ”€â”€ alembic/              # æ•°æ®åº“è¿ç§»é…ç½®
â”œâ”€â”€ api/                  # APIè·¯ç”±å’Œä¾èµ–
â”‚   â”œâ”€â”€ routes/           # APIç«¯ç‚¹å®šä¹‰
â”‚   â””â”€â”€ depends.py        # ä¾èµ–æ³¨å…¥
â”œâ”€â”€ core/                 # æ ¸å¿ƒé…ç½®
â”‚   â”œâ”€â”€ config.py         # åº”ç”¨é…ç½®
â”‚   â”œâ”€â”€ db.py             # æ•°æ®åº“è¿æ¥
â”‚   â””â”€â”€ security.py       # å®‰å…¨ç›¸å…³
â”œâ”€â”€ crud/                 # æ•°æ®åº“æ“ä½œ
â”œâ”€â”€ models/               # æ•°æ®æ¨¡å‹
â”‚   â”œâ”€â”€ base_models/      # åŸºç¡€æ¨¡å‹
â”‚   â”œâ”€â”€ public_models/    # å…¬å…±æ¨¡å‹
â”‚   â””â”€â”€ table.py          # è¡¨å®šä¹‰
â”œâ”€â”€ tool/                 # å·¥å…·å‡½æ•°
â”œâ”€â”€ backend_pre_start.py  # å¯åŠ¨å‰æ£€æŸ¥
â”œâ”€â”€ initial_data.py       # åˆå§‹æ•°æ®
â”œâ”€â”€ log_info.py           # æ—¥å¿—å·¥å…·
â””â”€â”€ main.py               # åº”ç”¨å…¥å£
```

### API æ–‡æ¡£

å¯åŠ¨é¡¹ç›®åï¼Œè®¿é—® API æ–‡æ¡£ï¼š
```
http://localhost:8000/docs
```

### ä¾èµ–ç®¡ç†

é¡¹ç›®ä½¿ç”¨Poetryè¿›è¡Œä¾èµ–ç®¡ç†ï¼Œè¿™æ˜¯ç‹¬ç«‹äº`lightning-fastapi`å·¥å…·çš„ï¼š

- å®‰è£…é¡¹ç›®ä¾èµ–ï¼š
```bash
# è¿›å…¥å·²åˆ›å»ºçš„é¡¹ç›®ç›®å½•
cd your-project-name
poetry install
```

- æ·»åŠ æ–°ä¾èµ–ï¼š
```bash
poetry add [åŒ…å]
```

- åˆ é™¤ä¾èµ–ï¼š
```bash
poetry remove [åŒ…å]
```

- æ¿€æ´»è™šæ‹Ÿç¯å¢ƒï¼š
```bash
poetry shell
```

- ä½¿ç”¨è™šæ‹Ÿç¯å¢ƒè¿è¡Œå‘½ä»¤ï¼š
```bash
poetry run uvicorn app.main:app --reload
```

> **æç¤º**ï¼šè¯·å‹¿æ··æ·†`lightning-fastapi`å‘½ä»¤è¡Œå·¥å…·ä¸é¡¹ç›®æœ¬èº«çš„ä¾èµ–ç®¡ç†ã€‚å‰è€…æ˜¯ç”¨äºåˆ›å»ºæ–°é¡¹ç›®çš„å·¥å…·ï¼Œåè€…æ˜¯é¡¹ç›®è‡ªèº«è¿è¡Œæ‰€éœ€çš„ä¾èµ–ç®¡ç†ç³»ç»Ÿã€‚

### è‡ªå®šä¹‰å¼€å‘

1. æ·»åŠ æ–°çš„æ¨¡å‹ï¼š
   - åœ¨ `app/models/base_models/` åˆ›å»ºæ–°çš„åŸºç¡€æ¨¡å‹
   - åœ¨ `app/models/table.py` æ·»åŠ è¡¨å®šä¹‰

2. æ·»åŠ æ–°çš„CRUDæ“ä½œï¼š
   - åœ¨ `app/crud/` åˆ›å»ºæ–°çš„CRUDæ–‡ä»¶

3. æ·»åŠ æ–°çš„APIè·¯ç”±ï¼š
   - åœ¨ `app/api/routes/` åˆ›å»ºæ–°çš„è·¯ç”±æ–‡ä»¶
   - åœ¨ `app/api/main.py` æ³¨å†Œæ–°è·¯ç”±

## éƒ¨ç½²ä¸å®šåˆ¶

### éƒ¨ç½²é…ç½®

æœ¬é¡¹ç›®åŒ…å«å®Œæ•´çš„éƒ¨ç½²å·¥ä½œæµå’Œé…ç½®æ–‡ä»¶ï¼š

1. **æœ¬åœ°å¼€å‘ç¯å¢ƒ**ï¼š
   - `docker/docker-compose-local.yml` - ç”¨äºæœ¬åœ°å¼€å‘ç¯å¢ƒçš„Docker Composeé…ç½®

2. **ç”Ÿäº§/æµ‹è¯•ç¯å¢ƒ**ï¼š
   - `docker/docker-compose.yml` - ç”¨äºç”Ÿäº§ç¯å¢ƒçš„Docker Composeé…ç½®
   - `config/.env.staging` - æµ‹è¯•ç¯å¢ƒçš„é…ç½®æ–‡ä»¶
   - `scripts/deploy.sh` - éƒ¨ç½²è„šæœ¬ï¼Œç”¨äºåœ¨æœåŠ¡å™¨ä¸Šéƒ¨ç½²å’Œé‡å¯åº”ç”¨

3. **CI/CD å·¥ä½œæµ**ï¼š
   - `.github/workflows/deploy-staging.yml` - GitHub Actionså·¥ä½œæµæ–‡ä»¶ï¼Œç”¨äºè‡ªåŠ¨éƒ¨ç½²åˆ°æµ‹è¯•ç¯å¢ƒ

### é¡¹ç›®å®šåˆ¶

å°†æ­¤Starterç”¨äºæ‚¨è‡ªå·±çš„é¡¹ç›®æ—¶ï¼Œè¯·è®°å¾—ä¿®æ”¹ä»¥ä¸‹å†…å®¹ï¼š

1. **é¡¹ç›®åç§°**ï¼š
   - åœ¨`.env`å’Œ`.env.staging`æ–‡ä»¶ä¸­æ›´æ–°`PROJECT_NAME`
   - åœ¨`docker/docker-compose.yml`å’Œ`docker/docker-compose-local.yml`ä¸­æ›´æ–°é•œåƒåç§°å’Œå®¹å™¨åç§°
   - åœ¨`scripts/deploy.sh`ä¸­æ›´æ–°ä»¥ä¸‹å†…å®¹:
     ```bash
     # å°† DEPLOY_DIR=/home/ubuntu/lightning-fastapi ä¿®æ”¹ä¸º
     DEPLOY_DIR=/home/ubuntu/your-project-name
     
     # å°† ARCHIVE_NAME="lightning-fastapi.tar.gz" ä¿®æ”¹ä¸º
     ARCHIVE_NAME="your-project-name.tar.gz"
     ```

2. **éƒ¨ç½²è·¯å¾„**ï¼š
   - åœ¨`scripts/deploy.sh`ä¸­æ›´æ–°`DEPLOY_DIR`å˜é‡
   - åœ¨`.github/workflows/deploy-staging.yml`ä¸­æ›´æ–°éƒ¨ç½²è·¯å¾„

3. **æ•°æ®åº“é…ç½®**ï¼š
   - æ›´æ–°æ‰€æœ‰ç¯å¢ƒæ–‡ä»¶ä¸­çš„æ•°æ®åº“è¿æ¥ä¿¡æ¯

4. **å¯†é’¥**ï¼š
   - ç”Ÿæˆæ–°çš„`SECRET_KEY`ç”¨äºJWTä»¤ç‰Œç­¾åï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š
     ```bash
     openssl rand -base64 32
     ```

5. **Logoå’Œå“ç‰Œ**ï¼š
   - åœ¨`app/main.py`ä¸­æ›´æ–°å¯åŠ¨logoå’Œé¡¹ç›®ä¿¡æ¯

## æ•…éšœæ’é™¤

### æ•°æ®åº“è¿ç§»é—®é¢˜

å¦‚æœæ‚¨åœ¨å¯åŠ¨åº”ç”¨æ—¶é‡åˆ°æ•°æ®åº“è¡¨ä¸å­˜åœ¨çš„é—®é¢˜ï¼ˆä¾‹å¦‚ `relation "user" does not exist`ï¼‰ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹æ­¥éª¤è§£å†³ï¼š

1. åœæ­¢æ‰€æœ‰æ­£åœ¨è¿è¡Œçš„å®¹å™¨ï¼š
```bash
docker compose -f docker/docker-compose-quickstart.yml down
```

2. è¿è¡Œä¿®å¤è„šæœ¬ï¼š
```bash
chmod +x scripts/fix_migration.sh
./scripts/fix_migration.sh
```

## è‡´è°¢

ç‰¹åˆ«æ„Ÿè°¢ [@liseami](https://github.com/liseami) æä¾›çš„çµæ„Ÿã€‚

## è®¸å¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - è¯¦æƒ…è¯·æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶ã€‚
